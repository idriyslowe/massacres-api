<div ng-app="app">
  <div ng-controller="murders" ng-init="setup()">
    <h2>Murdery Incidents</h2>

  <div>
    <ul> 
      <li ng-repeat="error in errors">{{ error }}</li>
    </ul>
    <div>
      <label>First Name:</label>
      <input ng-model="firstname">
    </div>
    <div>
      <label>Last Name:</label>
      <input ng-model="lastname">
    </div>
    <div>
      <label>Birthdate:</label>
      <input ng-model="birthdate">
    </div>
    <div>
      <label>Location:</label>
      <input ng-model="location">
    </div>
    <div>
      <label>Weapon:</label>
      <input ng-model="weapon">
    </div>
    <div>
      <label>Victims:</label>
      <input ng-model="victims">
    </div>
    <div>
      <label>Sentence:</label>
      <input ng-model="sentence">
    </div>
    <div>
      <button ng-click="addIncident(firstname, lastname, birthdate, location, weapon, victims, sentence)">Submit</button>
    </div>
  </div>
  <div>
    <label>Search by Name</label>
    <input ng-model="nameFilter">
  </div>

  <table border="1">
    <tr>
      <th ng-click="sortBy('murderer_first_name')">Murderer's First Name</th>
      <th ng-click="sortBy('murderer_last_name')">Murderer's Last Name</th> 
      <th ng-click="sortBy('birthdate')">Murderer's Birthdate</th>
      <th ng-click="sortBy('incident')">Incident Location</th>
      <th ng-click="sortBy('weapon')">Murderer Weapon</th>
      <th ng-click="sortBy('number_of_victims')">Number of Victims</th>
      <th ng-click="sortBy('sentence')">Murderer's Sentence</th>
    </tr>
    <tr ng-repeat="incident in incidents | filter: { murderer_first_name: nameFilter} | orderBy: sortAttribute : sortDescending">
      <td>{{ incident.murderer_first_name }}</td>
      <td>{{ incident.murderer_last_name }}</td>
      <td>{{ incident.birthdate }}</td>
      <td>{{ incident.location }}</td>
      <td>{{ incident.weapon }}</td>
      <td>{{ incident.number_of_victims }}</td>
      <td>{{ incident.sentence }}</td>
    </tr>
  </table>
    
</div>